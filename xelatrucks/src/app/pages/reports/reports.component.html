<!-- .card-deck-xl -->
<div class="card-deck-xl">
    <!-- .card -->
    <div class="card card-fluid">
        <!-- .card-header -->
        <div class="card-header">
            <!-- .nav-tabs -->
            <ul class="nav nav-tabs card-header-tabs">
                <li class="nav-item">
                    <a class="nav-link active show" data-toggle="tab" href="#purchases">Compras por proveedor</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#gasolines">Consumo de combustible</a>
                </li>
            </ul>
            <!-- /.nav-tabs -->
        </div>
        <!-- /.card-header -->
        <!-- .card-body -->
        <div class="card-body">
            <!-- .tab-content -->
            <div id="myTabContent" class="tab-content">
                <div class="tab-pane fade active show" id="purchases">
                    <div class="section-block">
                        <h2 class="section-title"> Aquí puede consultar las compras a proveedores en un rango de tiempo. </h2>
                    </div>
                    <div class="row">
                        <!-- .form-group -->
                        <div class="form-group col-2">
                            <label class="control-label" for="flatpickr02">Fecha de inicio</label>
                            <input #dateP1 name="date1" id="flatpickr" type="text" class="form-control" required>
                        </div>
                        <!-- /.form-group -->
                        <!-- .form-group -->
                        <div class="form-group col-2">
                            <label class="control-label" for="flatpickr02">Fecha final</label>
                            <input #dateP2 name="date2" id="flatpickr" type="text" class="form-control" required>
                        </div>
                        <!-- /.form-group -->
                        <!-- .form-group -->
                        <div class="form-group">
                            <label class="control-label">Proveedor</label>
                            <select #selectP name="autoProvider" class="form-control select2" id="autoProvider" style="width:100%!important;">
                                <option value=""> Seleccione un proveedor </option>
                                <option *ngFor="let autoProvider of autoProviders" [value]="autoProvider._id"> {{ autoProvider.name }}</option>
                            </select>
                        </div>
                        <!-- /.form-group -->
                        <button type="button" [ngStyle]="{'margin-top': '29px', 'margin-left': '10px'}" (click)="searchB()" class="btn btn-primary"><i class="fas fa-search"></i> Buscar</button>
                        <button type="button" (click)="createReportB()" data-toggle="modal" data-target="#modalBuySpares" class="btn btn-outline-primary ml-auto" style="margin-right: 10px;">Imprimir reporte <i class="fas fa-print"></i></button>
                    </div>
                    <!-- .btn-toolbar -->
                    <!-- <div id="dt-buttons" class="btn-toolbar ml-auto"></div> -->
                    <!-- /.btn-toolbar -->
                    <!-- .form-group -->
                    <!-- <div class="form-group"> -->
                    <!-- .input-group -->
                    <!-- <div class="input-group input-group-alt"> -->
                    <!-- .input-group -->
                    <!-- <div class="input-group has-clearable">
                                <button id="clear-search" type="button" class="close" aria-label="Close"><span aria-hidden="true"><i class="fa fa-times-circle"></i></span></button>
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><span class="oi oi-magnifying-glass"></span></span>
                                </div><input id="table-search" type="text" class="form-control" placeholder="Buscar aquí">
                            </div> -->
                    <!-- /.input-group -->
                    <!-- .input-group-prepend -->
                    <!-- <div class="input-group-prepend">
                                <select id="filterBy" class="custom-select">
                            <option value='' selected> Filtros </option>
                            <option value="0"> Fecha </option>
                            <option value="1"> Factura </option>
                            <option value="2"> Serie </option>
                            <option value="3"> Documento </option>
                            <option value="4"> Subtotal </option>
                            <option value="5"> Descuento </option>
                            <option value="6"> Total </option>
                        </select>
                            </div> -->
                    <!-- /.input-group-prepend -->
                    <!-- </div> -->
                    <!-- /.input-group -->
                    <!-- </div> -->
                    <!-- /.form-group -->
                    <!-- .table -->
                    <table id="myTable" class="table">
                        <thead>
                            <tr>
                                <th> Fecha </th>
                                <th> Factura </th>
                                <th> Serie </th>
                                <th> Documento </th>
                                <th> Subtotal </th>
                                <th> Descuento </th>
                                <th> Total </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let buySpare of buySpares">
                                <td>
                                    {{ buySpare.date | date: 'dd/MM/yyyy' }}
                                </td>
                                <td>
                                    {{ buySpare.noBill }}
                                </td>
                                <td>
                                    {{ buySpare.serie }}
                                </td>
                                <td>
                                    {{ buySpare.noDoc }}
                                </td>
                                <td>
                                    Q {{ buySpare.total | number : '1.2-2' }}
                                </td>
                                <td>
                                    Q {{ buySpare.discount | number : '1.2-2' }}
                                </td>
                                <td>
                                    Q {{ (buySpare.total - buySpare.discount) | number : '1.2-2' }}
                                </td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <th> </th>
                                <th> </th>
                                <th> </th>
                                <th> Totales </th>
                                <th>
                                    <h5>
                                        Q {{ totalB | number : '1.2-2' }}
                                    </h5>
                                </th>
                                <th>
                                    <h5>
                                        Q {{ totalDiscountB | number : '1.2-2' }}
                                    </h5>
                                </th>
                                <th>
                                    <h5>
                                        Q {{ (totalB - totalDiscountB) | number : '1.2-2' }}
                                    </h5>
                                </th>
                            </tr>
                        </tfoot>
                    </table>
                    <ng-template #customLoadingTemplate>
                    </ng-template>
                    <!-- /.table -->
                    <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }" [template]="customLoadingTemplate"></ngx-loading>
                </div>
                <div class="tab-pane fade" id="gasolines">
                    <div class="section-block">
                        <h2 class="section-title"> Aquí puede consultar el consumo de combustible de los vehículos en un rango de tiempo. </h2>
                    </div>
                    <div class="row">
                        <!-- .form-group -->
                        <div class="form-group col-2">
                            <label class="control-label" for="flatpickr02">Fecha de inicio</label>
                            <input #dateG1 name="dateG1" id="flatpickr" type="text" class="form-control" required>
                        </div>
                        <!-- /.form-group -->
                        <!-- .form-group -->
                        <div class="form-group col-2">
                            <label class="control-label" for="flatpickr02">Fecha final</label>
                            <input #dateG2 name="dateG2" id="flatpickr" type="text" class="form-control" required>
                        </div>
                        <!-- /.form-group -->
                        <button type="button" [ngStyle]="{'margin-top': '29px'}" (click)="searchG()" class="btn btn-primary"><i class="fas fa-search"></i> Buscar</button>
                        <button type="button" (click)="createReportG()" data-toggle="modal" data-target="#modalReport" class="btn btn-outline-primary ml-auto" style="margin-right: 10px;">Imprimir reporte <i class="fas fa-print"></i></button>
                    </div>
                    <!-- .btn-toolbar -->
                    <!-- <div id="dt-buttons" class="btn-toolbar"></div> -->
                    <!-- /.btn-toolbar -->
                    <!-- .form-group -->
                    <!-- <div class="form-group"> -->
                    <!-- .input-group -->
                    <!-- <div class="input-group input-group-alt"> -->
                    <!-- .input-group -->
                    <!-- <div class="input-group has-clearable">
                                <button id="clear-search" type="button" class="close" aria-label="Close"><span aria-hidden="true"><i class="fa fa-times-circle"></i></span></button>
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><span class="oi oi-magnifying-glass"></span></span>
                                </div><input id="table-search" type="text" class="form-control" placeholder="Buscar aquí">
                            </div> -->
                    <!-- /.input-group -->
                    <!-- .input-group-prepend -->
                    <!-- <div class="input-group-prepend">
                                <select id="filterBy" class="custom-select">
                            <option value='' selected> Filtros </option>
                            <option value="0"> Vehículo </option>
                            <option value="1"> Fecha </option>
                            <option value="2"> Código </option>
                            <option value="3"> Galones </option>
                            <option value="4"> Total </option>
                        </select>
                            </div> -->
                    <!-- /.input-group-prepend -->
                    <!-- </div> -->
                    <!-- /.input-group -->
                    <!-- </div> -->
                    <!-- /.form-group -->
                    <!-- .table -->
                    <table id="myTable2" class="table">
                        <thead>
                            <tr>
                                <th> Vehículo </th>
                                <th> Fecha </th>
                                <th> Código </th>
                                <th class="sum"> Galones </th>
                                <th> Total </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let gasoline of gasolines">
                                <td class="align-middle text-truncate">
                                    <div class="media align-items-center">
                                        <!-- .list-group-item-figure -->
                                        <div *ngIf="gasoline.type==='camion'" class="list-group-item-figure">
                                            <div class="tile tile-circle bg-yellow"> <i class="fas fa-truck"></i></div>
                                        </div>
                                        <!-- /.list-group-item-figure -->
                                        <div *ngIf="gasoline.type==='camion'" class="media-body">
                                            <label>Camión <br> {{ gasoline.plate }}</label>
                                        </div>
                                        <!-- .list-group-item-figure -->
                                        <div *ngIf="gasoline.type==='camionG'" class="list-group-item-figure">
                                            <div class="tile tile-circle bg-orange"> <i class="fas fa-truck-moving"></i> </div>
                                        </div>
                                        <!-- /.list-group-item-figure -->
                                        <!-- .list-group-item-body -->
                                        <div *ngIf="gasoline.type==='camionG'" class="media-body">
                                            <label>Camión Gondola <br> {{ gasoline.plate }}</label>
                                        </div>
                                        <!-- /.list-group-item-body -->
                                        <!-- .list-group-item-figure -->
                                        <div *ngIf="gasoline.type==='vehiculo'" class="list-group-item-figure">
                                            <div class="tile tile-circle bg-blue"> <i class="fas fa-truck-pickup"></i> </div>
                                        </div>
                                        <!-- /.list-group-item-figure -->
                                        <!-- .list-group-item-body -->
                                        <div *ngIf="gasoline.type==='vehiculo'" class="media-body">
                                            <label>Vehículo <br> {{ gasoline.plate }}</label>
                                        </div>
                                        <!-- /.list-group-item-body -->
                                        <!-- .list-group-item-figure -->
                                        <div *ngIf="gasoline.type==='riego'" class="list-group-item-figure">
                                            <div class="tile tile-circle bg-green"> <i class="fas fa-truck-monster"></i> </div>
                                        </div>
                                        <!-- /.list-group-item-figure -->
                                        <!-- .list-group-item-body -->
                                        <div *ngIf="gasoline.type==='riego'" class="media-body">
                                            <label>Camión para riego <br> {{ gasoline.plate }}</label>
                                        </div>
                                        <!-- /.list-group-item-body -->
                                        <!-- .list-group-item-figure -->
                                        <div *ngIf="gasoline.type==='stock'" class="list-group-item-figure">
                                            <div class="tile tile-circle bg-pink"> <i class="fas fa-snowplow"></i> </div>
                                        </div>
                                        <!-- /.list-group-item-figure -->
                                        <!-- .list-group-item-body -->
                                        <div *ngIf="gasoline.type==='stock'" class="media-body">
                                            <label>Excavadora <br> {{ gasoline.plate }}</label>
                                        </div>
                                        <!-- /.list-group-item-body -->
                                    </div>
                                </td>
                                <td class="align-middle">
                                    {{ dtService.fromJsonDate(gasoline.date) }}
                                </td>
                                <td class="align-middle">{{ gasoline.code }}</td>
                                <td class="align-middle"> {{ gasoline.gallons }} </td>
                                <td class="align-middle">Q {{ gasoline.total | number : '1.2-2' }} </td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <th></th>
                                <th></th>
                                <th> Totales </th>
                                <th>
                                    <h5>
                                        Q {{ totalGal | number : '1.2-2' }}
                                    </h5>
                                </th>
                                <th>
                                    <h5>
                                        Q {{ totalGas | number : '1.2-2' }}
                                    </h5>
                                </th>
                            </tr>
                        </tfoot>
                    </table>
                    <ng-template #customLoadingTemplate>
                    </ng-template>
                    <!-- /.table -->
                    <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }" [template]="customLoadingTemplate"></ngx-loading>
                </div>
            </div>
            <!-- /.tab-content -->
        </div>
        <!-- /.card-body -->
    </div>
    <!-- /.card -->
</div>
<!-- /.card-deck-xl -->
<!-- .modalREPORT -->
<div class="modal fade" id="modalReport" role="dialog" aria-labelledby="clientContactNewModalLabel" aria-hidden="true">
    <!-- .modal-dialog -->
    <div class="modal-dialog modal-lg" role="document">
        <!-- .modal-content -->
        <div class="modal-content">
            <!-- .modal-header -->
            <div class="modal-header">
                <h5 class="modal-title"><i class="fas fa-gas-pump"></i> Reporte de combustible </h5>
            </div>
            <!-- /.modal-header -->
            <!-- .modal-body -->
            <div class="modal-body">
                <!-- .section-block -->
                <div class="section-block">
                    <!-- .invoice-wrapper -->
                    <div id="benito" class="invoice-wrapper">
                        <!-- .invoice-actions -->
                        <div class="invoice-actions">
                            <div class="dropdown">
                                <button type="button" class="btn btn-lg btn-secondary rounded-0" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fa fa-caret-down"></span></button>
                                <div class="dropdown-menu dropdown-menu-right">
                                    <div class="dropdown-arrow mr-1"></div><button type="button" id="download-pdf" class="dropdown-item">Descargar PDF</button>
                                </div>
                            </div>
                        </div>
                        <!-- /.invoice-actions -->
                        <!-- .invoice -->
                        <div id="invoice" class="invoice" data-id="RPT-COMBUSTIBLE">
                            <!-- .invoice-header -->
                            <div class="invoice-header">
                                <!-- grid row -->
                                <div class="row">
                                    <!-- .col -->
                                    <div class="col d-flex">
                                        <h2 class="invoice-brand align-self-center">
                                            <img src="assets/images/logo-min.png" width="270" alt=""> <span class="sr-only">Reporte la Viña S.A</span>
                                        </h2>
                                    </div>
                                    <!-- /.col -->
                                    <!-- .col -->
                                    <div class="col">
                                        <table class="table table-borderless table-sm">
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <small>Usuario</small><br>
                                                        <h6> {{ userS.usuario.name + ' ' + userS.usuario.lastName }} </h6>
                                                    </td>
                                                    <td colspan="2">
                                                        <small>Fecha</small><br>
                                                        <h6> {{ today | date:"dd/MM/yyyy HH:mm"}} </h6>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <!-- /.col -->
                                </div>
                                <!-- /grid row -->
                            </div>
                            <!-- /.invoice-header -->
                            <!-- .invoice-body -->
                            <div class="invoice-body">
                                <table class="table table-sm">
                                    <caption class="invoice-title">
                                        <span>Reporte</span><br>
                                        <span class="text-primary">Consumo de combustible {{ date1Consulta + ' - ' +  date2Consulta}} </span>
                                    </caption>
                                    <thead>
                                        <tr>
                                            <th><strong>Vehículo</strong></th>
                                            <th> Fecha </th>
                                            <th> Código </th>
                                            <th class="text-right"> Galones </th>
                                            <th class="text-right"> Total (Q) </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let gasoline of gasolines">
                                            <td>
                                                <p>{{ gasoline.plate }}</p>
                                            </td>
                                            <td> {{ dtService.fromJsonDate(gasoline.date) }} </td>
                                            <td> {{ gasoline.code }} </td>
                                            <td class="text-right"> {{ gasoline.gallons }} </td>
                                            <td class="text-right"> Q{{ gasoline.total | number : '1.2-2' }} </td>
                                        </tr>
                                        <!-- fake border -->
                                        <tr>
                                            <td colspan="5"></td>
                                        </tr>
                                    </tbody>
                                    <tfoot class="table-borderless">
                                        <tr>
                                            <th colspan="2"></th>
                                            <th> Total </th>
                                            <th class="text-right"> {{ totalGal | number : '1.2-2' }} </th>
                                            <th class="text-right"> Q{{ totalGas | number : '1.2-2' }} </th>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                            <!-- /.invoice-body -->
                            <!-- .invoice-footer -->
                            <div class="invoice-footer">
                                <p><strong>Copyright &copy; APPLITECH SOFTWARE SOLUTIONS.
                                </strong> Todos Los Derechos Reservados.</p>
                            </div>
                            <!-- /.invoice-footer -->
                        </div>
                        <!-- /.invoice -->
                    </div>
                    <!-- /.invoice-wrapper -->
                </div>
                <!-- /.section-block -->
            </div>
            <!-- /.modal-body -->
            <!-- .modal-footer -->
            <div class="modal-footer">
                <button #closeMG type="button" class="btn btn-light" data-dismiss="modal">Cerrar</button>
            </div>
            <!-- /.modal-footer -->
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modalREPORT -->
<!-- .modalREPORT -->
<div class="modal fade" id="modalBuySpares" role="dialog" aria-labelledby="clientContactNewModalLabel" aria-hidden="true">
    <!-- .modal-dialog -->
    <div class="modal-dialog modal-lg" role="document">
        <!-- .modal-content -->
        <div class="modal-content">
            <!-- .modal-header -->
            <div class="modal-header">
                <h5 class="modal-title"><i class="fas fa-money-check-alt"></i> Reporte de compras por proveedor </h5>
            </div>
            <!-- /.modal-header -->
            <!-- .modal-body -->
            <div class="modal-body">
                <!-- .section-block -->
                <div class="section-block">
                    <!-- .invoice-wrapper -->
                    <div id="benito2" class="invoice-wrapper">
                        <!-- .invoice-actions -->
                        <div class="invoice-actions">
                            <div class="dropdown">
                                <button type="button" class="btn btn-lg btn-secondary rounded-0" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fa fa-caret-down"></span></button>
                                <div class="dropdown-menu dropdown-menu-right">
                                    <div class="dropdown-arrow mr-1"></div><button type="button" id="download-pdf2" class="dropdown-item">Descargar PDF</button>
                                </div>
                            </div>
                        </div>
                        <!-- /.invoice-actions -->
                        <!-- .invoice -->
                        <div id="invoice2" class="invoice" data-id="RPT-COMPRAS-PROVEEDOR">
                            <!-- .invoice-header -->
                            <div class="invoice-header">
                                <!-- grid row -->
                                <div class="row">
                                    <!-- .col -->
                                    <div class="col d-flex">
                                        <h2 class="invoice-brand align-self-center">
                                            <img src="assets/images/logo-min.png" width="270" alt=""> <span class="sr-only">Reporte la Viña S.A</span>
                                        </h2>
                                    </div>
                                    <!-- /.col -->
                                    <!-- .col -->
                                    <div class="col">
                                        <table class="table table-borderless table-sm">
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <small>Usuario</small><br>
                                                        <h6> {{ userS.usuario.name + ' ' + userS.usuario.lastName }} </h6>
                                                    </td>
                                                    <td colspan="2">
                                                        <small>Fecha</small><br>
                                                        <h6> {{ today | date:"dd/MM/yyyy HH:mm"}} </h6>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <!-- /.col -->
                                </div>
                                <!-- /grid row -->
                            </div>
                            <!-- /.invoice-header -->
                            <!-- .invoice-body -->
                            <div class="invoice-body">
                                <table class="table table-sm">
                                    <caption class="invoice-title">
                                        <span>Reporte</span><br>
                                        <span class="text-primary">Compras a {{ nombreSelect + ' entre ' + date1Consulta + ' - ' +  date2Consulta}} </span>
                                    </caption>
                                    <thead>
                                        <tr>
                                            <th> Fecha </th>
                                            <th> Factura </th>
                                            <th> Serie </th>
                                            <th> Documento </th>
                                            <th class="text-right"> Subtotal (Q) </th>
                                            <th class="text-right"> Descuento (Q) </th>
                                            <th class="text-right"> Total (Q) </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let buySpare of buySpares">
                                            <td> {{ buySpare.date | date: 'dd/MM/yyyy' }} </td>
                                            <td> {{ buySpare.noBill }} </td>
                                            <td> {{ buySpare.serie }} </td>
                                            <td> {{ buySpare.noDoc }} </td>
                                            <td class="text-right"> Q{{ buySpare.total | number: '1.2-2' }} </td>
                                            <td class="text-right"> Q{{ buySpare.discount | number : '1.2-2' }} </td>
                                            <td class="text-right"> Q{{ (buySpare.total - buySpare.discount) | number : '1.2-2' }} </td>
                                        </tr>
                                        <!-- fake border -->
                                        <tr>
                                            <td colspan="7"></td>
                                        </tr>
                                    </tbody>
                                    <tfoot class="table-borderless">
                                        <tr>
                                            <th colspan="3"></th>
                                            <th> Totales </th>
                                            <th class="text-right"> Q{{ totalB | number : '1.2-2' }} </th>
                                            <th class="text-right"> Q{{ totalDiscountB | number : '1.2-2' }} </th>
                                            <th class="text-right"> Q{{ (totalB - totalDiscountB) | number : '1.2-2' }} </th>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                            <!-- /.invoice-body -->
                            <!-- .invoice-footer -->
                            <div class="invoice-footer">
                                <p><strong>Copyright &copy; APPLITECH SOFTWARE SOLUTIONS.
                                </strong> Todos Los Derechos Reservados.</p>
                            </div>
                            <!-- /.invoice-footer -->
                        </div>
                        <!-- /.invoice -->
                    </div>
                    <!-- /.invoice-wrapper -->
                </div>
                <!-- /.section-block -->
            </div>
            <!-- /.modal-body -->
            <!-- .modal-footer -->
            <div class="modal-footer">
                <button #closeMG type="button" class="btn btn-light" data-dismiss="modal">Cerrar</button>
            </div>
            <!-- /.modal-footer -->
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modalREPORT -->