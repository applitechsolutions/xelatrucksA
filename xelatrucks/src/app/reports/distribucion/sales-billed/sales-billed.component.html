<div class="section-block">
  <h2 class="section-title"> Aquí puede consultar las ventas con factura en un rango de tiempo. </h2>
</div>
<div class="row">
  <!-- .form-group -->
  <div class="form-group col-2">
    <label class="control-label" for="flatpickr02">Fecha de inicio</label>
    <input #dateP1 name="date1" id="flatpickr" type="text" class="form-control" required>
  </div>
  <!-- /.form-group -->
  <!-- .form-group -->
  <div class="form-group col-2">
    <label class="control-label" for="flatpickr02">Fecha final</label>
    <input #dateP2 name="date2" id="flatpickr" type="text" class="form-control" required>
  </div>
  <!-- /.form-group -->
  <button type="button" [ngStyle]="{'margin-top': '29px', 'margin-left': '10px'}" (click)="searchB()"
    class="btn btn-primary"><i class="fas fa-search"></i> Buscar</button>
  <button type="button" (click)="createReportB()" data-toggle="modal" data-target="#modalSalesByAmount"
    class="btn btn-outline-primary ml-auto" style="margin-right: 10px;">Imprimir reporte <i
      class="fas fa-print"></i></button>
</div>
<!-- .btn-toolbar -->
<div [id]="dtButtons" class="btn-toolbar ml-auto"></div>
<!-- /.btn-toolbar -->
<!-- .form-group -->
<div class="form-group">
  <!-- .input-group -->
  <div class="input-group input-group-alt">
    <!-- .input-group -->
    <div class="input-group has-clearable">
      <button [id]="clearSearch" type="button" class="close" aria-label="Close"><span aria-hidden="true"><i
            class="fa fa-times-circle"></i></span></button>
      <div class="input-group-prepend">
        <span class="input-group-text"><span class="oi oi-magnifying-glass"></span></span>
      </div><input [id]="tableSearch" type="text" class="form-control" placeholder="Buscar aquí">
    </div>
    <!-- /.input-group -->
    <!-- .input-group-prepend -->
    <div class="input-group-prepend">
      <select [id]="filterBy" class="custom-select">
        <option value='' selected> Filtros </option>
        <option value="0"> Fecha </option>
        <option value="1"> Cliente </option>
        <option value="2"> Factura </option>
        <option value="3"> No. de Despacho </option>
        <option value="4"> Documento </option>
        <option value="5"> Flete </option>
        <option value="6"> Subtotal </option>
        <option value="7"> Total </option>
      </select>
    </div>
    <!-- /.input-group-prepend -->
  </div>
  <!-- /.input-group -->
</div>
<!-- /.form-group -->
<!-- .table -->
<table [id]="idTable" class="table table-striped">
  <thead>
    <tr>
      <th> Fecha </th>
      <th> Cliente </th>
      <th> Factura </th>
      <th> No. Despacho </th>
      <th> Detalles </th>
      <th> Flete </th>
      <th> Subtotal </th>
      <th> Total </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let sale of sales">
      <td>
        {{ sale.date | date: 'dd/MM/yyyy' }}
      </td>
      <td>
        {{ sale._customer.name }} {{ sale._customer.nit }}
      </td>
      <td>
        {{ sale.bill }}
      </td>
      <td>
        {{ sale.serie }}
      </td>
      <td>
        <ul *ngFor="let detail of sale.details">
          <li>{{ detail.material.name }} {{ detail.material.code }} - {{ detail.total }}</li>
        </ul>
      </td>
      <td>
        Q {{ sale.flete | number : '1.2-2' }}
      </td>
      <td>
        Q {{ (sale.total - sale.flete) | number : '1.2-2' }}
      </td>
      <td>
        Q {{ sale.total | number : '1.2-2' }}
      </td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
      <th> </th>
      <th> </th>
      <th> </th>
      <th> </th>
      <th> Totales </th>
      <th>
        <h5>
          Q {{ totalF | number : '1.2-2' }}
        </h5>
      </th>
      <th>
        <h5>
          Q {{ (totalS - totalF) | number : '1.2-2' }}
        </h5>
      </th>
      <th>
        <h5>
          Q {{ totalS | number : '1.2-2' }}
        </h5>
      </th>
    </tr>
  </tfoot>
</table>
<ng-template #customLoadingTemplate>
</ng-template>
<!-- /.table -->
<!-- .loader -->
<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }" [template]="customLoadingTemplate">
</ngx-loading>
<!-- /.loader -->
